{
  "hash": "fa4bbe0113ea12ca296fa26f6a20ca79",
  "result": {
    "markdown": "---\ntitle: \"AFL Ladder and Team Quality Persistance Over Time\"\nauthor: \"Samuel Kirschner\"\ndate: \"2023-07-24\"\ncategories: [AFL,Intro to AFL]\nimage: \"afl-ladder.jpg\"\n---\n\n\nWhat is the Ladder?\n\nIn the AFL what we would typically call the standings or table is called the ladder. The ladder is the standings of all 18 teams at a given point in time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(RPostgres)\nlibrary(ggplot2)\nlibrary(gt)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dplyr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(gtExtras)\nlibrary(ggthemes)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggthemes' was built under R version 4.2.2\n```\n:::\n\n```{.r .cell-code}\nlibrary(ghibli)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ghibli' was built under R version 4.2.3\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggimage)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Replace these placeholders with your actual PostgreSQL credentials\ndb_host <- \"localhost\"\ndb_name <- \"AFL_data\"\ndb_user <- \"postgres\"\ndb_password <- \"Cincinnati1\"\n\n# Construct the connection string\ncon_string <- paste0(\"host=\", db_host,\n                     \" dbname=\", db_name,\n                     \" user=\", db_user,\n                     \" password=\", db_password)\n\n# Establish the connection\ncon <- dbConnect(RPostgres::Postgres(), dbname = db_name, user = db_user,\n                 password = db_password, host = db_host)\n\n# Years range (update this based on your data)\nstart_year <- 2015\nend_year <- 2022\n\n# Create an empty list to store data frames\ndata_list <- list()\n\n# Loop through each year\nfor (year in start_year:end_year) {\n  # Generate the table name for the specific year\n  table_name <- paste0(\"afl_results_\", year)\n  \n  # Fetch data from the table for the current year\n  query <- paste0(\"SELECT * FROM \", table_name)\n  data <- dbGetQuery(con, query)\n  data <- data %>% mutate(year = year)\n  # Append the data to the list\n  data_list[[year - start_year + 1]] <- data\n}\n\n# Combine data into one data frame\nafl_results <- do.call(rbind, data_list)\n\n\n\n\n\n\n\n# Create an empty list to store data frames\ndata_ladder <- list()\n\n# Loop through each year\nfor (year in start_year:end_year) {\n  # Generate the table name for the specific year\n  table_name <- paste0(\"afl_ladder_squiggle_\", year)\n  \n  # Fetch data from the table for the current year\n  query <- paste0(\"SELECT * FROM \", table_name)\n  data <- dbGetQuery(con, query)\n  data <- data %>% mutate(year = year)\n  # Append the data to the list\n  data_ladder[[year - start_year + 1]] <- data\n}\n\n# Combine data into one data frame\nafl_ladder <- do.call(rbind, data_ladder)\n\n### need to finish adding logos. svg or jpg only works\nAFL_logos<-read.csv(\"AFL_logos.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nafl_ladder%>%head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  percentage for. against played behinds_for behinds_against goals_against\n1   118.7340 1857    1564     22         219             214           225\n2   148.2188 2330    1572     22         290             198           229\n3   158.3979 2452    1548     22         262             222           221\n4   127.1229 2006    1578     22         254             240           223\n5   123.0867 1930    1568     22         250             248           220\n6   115.1233 2101    1825     22         241             217           268\n  draws pts id             name losses goals_for wins rank year\n1     0  68  6        Fremantle      5       273   17    1 2015\n2     1  66 17       West Coast      5       340   16    2 2015\n3     0  64 10         Hawthorn      6       365   16    3 2015\n4     0  64 16           Sydney      6       292   16    4 2015\n5     0  60 14         Richmond      7       280   15    5 2015\n6     0  56 18 Western Bulldogs      8       310   14    6 2015\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nafl_ladder <- afl_ladder %>%\n  left_join(AFL_logos, by = c('name'='Team_Name'))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nladder_2022<-afl_ladder%>%select(rank,name,logo,pts,wins,year)%>%filter(year==2022)%>%select(-year)\n\nladder_2022%>%gt()%>%gt_img_rows(columns = logo,img_source=\"web\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"dzfrunlfrv\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#dzfrunlfrv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#dzfrunlfrv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#dzfrunlfrv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#dzfrunlfrv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#dzfrunlfrv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#dzfrunlfrv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#dzfrunlfrv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#dzfrunlfrv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#dzfrunlfrv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#dzfrunlfrv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#dzfrunlfrv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#dzfrunlfrv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#dzfrunlfrv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dzfrunlfrv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#dzfrunlfrv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#dzfrunlfrv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dzfrunlfrv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#dzfrunlfrv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dzfrunlfrv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#dzfrunlfrv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dzfrunlfrv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dzfrunlfrv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dzfrunlfrv .gt_left {\n  text-align: left;\n}\n\n#dzfrunlfrv .gt_center {\n  text-align: center;\n}\n\n#dzfrunlfrv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#dzfrunlfrv .gt_font_normal {\n  font-weight: normal;\n}\n\n#dzfrunlfrv .gt_font_bold {\n  font-weight: bold;\n}\n\n#dzfrunlfrv .gt_font_italic {\n  font-style: italic;\n}\n\n#dzfrunlfrv .gt_super {\n  font-size: 65%;\n}\n\n#dzfrunlfrv .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#dzfrunlfrv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#dzfrunlfrv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#dzfrunlfrv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#dzfrunlfrv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#dzfrunlfrv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#dzfrunlfrv .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">rank</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">logo</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">pts</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">wins</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Geelong</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/geelong.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">72</td>\n<td class=\"gt_row gt_right\">18</td></tr>\n    <tr><td class=\"gt_row gt_right\">2</td>\n<td class=\"gt_row gt_left\">Melbourne</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/melbourne.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">64</td>\n<td class=\"gt_row gt_right\">16</td></tr>\n    <tr><td class=\"gt_row gt_right\">3</td>\n<td class=\"gt_row gt_left\">Sydney</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/sydney-swans.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">64</td>\n<td class=\"gt_row gt_right\">16</td></tr>\n    <tr><td class=\"gt_row gt_right\">4</td>\n<td class=\"gt_row gt_left\">Collingwood</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/collingwood.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">64</td>\n<td class=\"gt_row gt_right\">16</td></tr>\n    <tr><td class=\"gt_row gt_right\">5</td>\n<td class=\"gt_row gt_left\">Fremantle</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/fremantle.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">62</td>\n<td class=\"gt_row gt_right\">15</td></tr>\n    <tr><td class=\"gt_row gt_right\">6</td>\n<td class=\"gt_row gt_left\">Brisbane Lions</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/brisbane-lions.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">60</td>\n<td class=\"gt_row gt_right\">15</td></tr>\n    <tr><td class=\"gt_row gt_right\">7</td>\n<td class=\"gt_row gt_left\">Richmond</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/richmond.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">54</td>\n<td class=\"gt_row gt_right\">13</td></tr>\n    <tr><td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_left\">Western Bulldogs</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/western-bulldogs.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">48</td>\n<td class=\"gt_row gt_right\">12</td></tr>\n    <tr><td class=\"gt_row gt_right\">9</td>\n<td class=\"gt_row gt_left\">Carlton</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/carlton.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">48</td>\n<td class=\"gt_row gt_right\">12</td></tr>\n    <tr><td class=\"gt_row gt_right\">10</td>\n<td class=\"gt_row gt_left\">St Kilda</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/st-kilda.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">44</td>\n<td class=\"gt_row gt_right\">11</td></tr>\n    <tr><td class=\"gt_row gt_right\">11</td>\n<td class=\"gt_row gt_left\">Port Adelaide</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/port-adelaide.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">40</td>\n<td class=\"gt_row gt_right\">10</td></tr>\n    <tr><td class=\"gt_row gt_right\">12</td>\n<td class=\"gt_row gt_left\">Gold Coast</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/suns.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">40</td>\n<td class=\"gt_row gt_right\">10</td></tr>\n    <tr><td class=\"gt_row gt_right\">13</td>\n<td class=\"gt_row gt_left\">Hawthorn</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/hawthorn-football.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">32</td>\n<td class=\"gt_row gt_right\">8</td></tr>\n    <tr><td class=\"gt_row gt_right\">14</td>\n<td class=\"gt_row gt_left\">Adelaide</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/adelaide.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">32</td>\n<td class=\"gt_row gt_right\">8</td></tr>\n    <tr><td class=\"gt_row gt_right\">15</td>\n<td class=\"gt_row gt_left\">Essendon</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/essendon.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">28</td>\n<td class=\"gt_row gt_right\">7</td></tr>\n    <tr><td class=\"gt_row gt_right\">16</td>\n<td class=\"gt_row gt_left\">Greater Western Sydney</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/giants.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">24</td>\n<td class=\"gt_row gt_right\">6</td></tr>\n    <tr><td class=\"gt_row gt_right\">17</td>\n<td class=\"gt_row gt_left\">West Coast</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/west-coast-eagles.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_right\">2</td></tr>\n    <tr><td class=\"gt_row gt_right\">18</td>\n<td class=\"gt_row gt_left\">North Melbourne</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/north-melbourne.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_right\">2</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nchamps<-afl_ladder%>%filter(rank==1)%>%select(rank,name,logo,year)\n\nchamps%>%gt()%>%gt_img_rows(columns = logo,img_source=\"web\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"yveusmxamj\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#yveusmxamj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#yveusmxamj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#yveusmxamj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#yveusmxamj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#yveusmxamj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#yveusmxamj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#yveusmxamj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#yveusmxamj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#yveusmxamj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#yveusmxamj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#yveusmxamj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#yveusmxamj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#yveusmxamj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yveusmxamj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#yveusmxamj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#yveusmxamj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yveusmxamj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#yveusmxamj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yveusmxamj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#yveusmxamj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yveusmxamj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#yveusmxamj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yveusmxamj .gt_left {\n  text-align: left;\n}\n\n#yveusmxamj .gt_center {\n  text-align: center;\n}\n\n#yveusmxamj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#yveusmxamj .gt_font_normal {\n  font-weight: normal;\n}\n\n#yveusmxamj .gt_font_bold {\n  font-weight: bold;\n}\n\n#yveusmxamj .gt_font_italic {\n  font-style: italic;\n}\n\n#yveusmxamj .gt_super {\n  font-size: 65%;\n}\n\n#yveusmxamj .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#yveusmxamj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#yveusmxamj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#yveusmxamj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#yveusmxamj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#yveusmxamj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#yveusmxamj .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">rank</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">logo</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">year</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Fremantle</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/fremantle.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2015</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Sydney</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/sydney-swans.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2016</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Adelaide</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/adelaide.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2017</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Richmond</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/richmond.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2018</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Geelong</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/geelong.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2019</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Port Adelaide</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/port-adelaide.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2020</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Melbourne</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/melbourne.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2021</td></tr>\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">Geelong</td>\n<td class=\"gt_row gt_left\"><img src=\"https://logotyp.us/file/geelong.svg\" style=\"height:30px;\"></td>\n<td class=\"gt_row gt_right\">2022</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n### Lets look at a single team through time\nsingle_team<-afl_ladder%>%filter(name==\"Geelong\")\n\n# Create the plot using ggplot\nggplot(single_team, aes(x = year, y = rank)) +\n  geom_point(size = 3) +\n  geom_line() +\n  geom_image(aes(image = logo), size = 0.1) +\n  scale_x_continuous(breaks = unique(single_team$year)) +\n  scale_y_reverse(breaks = seq(1, 18, 1)) +\n  labs(title = \"Geelong Rank Year by Year\",\n       x = \"Year\",\n       y = \"Rank\") +\n  theme_minimal() + \n  theme(panel.grid = element_blank())\n```\n\n::: {.cell-output-display}\n![](AFL_Ladder_Team_Quality_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Sort the original data by team and year\nrank_df <- afl_ladder %>%\n  select(name,year,rank)%>%\n  arrange(name, year)\n\n# Add the rank from the prior year for each team\nrank_corr <- rank_df %>%\n  group_by(name) %>%\n  mutate(rank_year_prior = lag(rank))\n\n# If you want to remove the rows where there is no prior year data (for the first year of each team)\nrank_corr <- rank_corr %>% \n  filter(!is.na(rank_year_prior))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncor(rank_corr$rank,rank_corr$rank_year_prior)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.4966829\n```\n:::\n:::",
    "supporting": [
      "AFL_Ladder_Team_Quality_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}